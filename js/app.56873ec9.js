(function(){"use strict";var t={5720:function(t,s,a){var e=a(6848),i=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-primary"},[s("div",{staticClass:"container"},[s("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Lesson Shop")]),t._m(0),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[s("ul",{staticClass:"navbar-nav me-auto"},[s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",class:{active:"lessons"===t.currentView},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.currentView="lessons"}}},[t._v("Lesson List")])])]),s("button",{staticClass:"btn btn-light position-relative",on:{click:t.toggleView}},[s("i",{staticClass:"bi bi-cart3"}),t._v(" Cart "),t.totalQuantity?s("span",{staticClass:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},[t._v(" "+t._s(t.totalQuantity)+" ")]):t._e()])])])]),s("lessons"===t.currentView?"LessonList":"ShoppingCart",{tag:"component",attrs:{cart:t.cartItems},on:{"add-to-cart":t.addToCart,"remove-from-cart":t.removeFromCart,"update-quantity":t.updateQuantity,"clear-cart":t.clearCart}}),s("div",{staticClass:"toast-container position-fixed bottom-0 end-0 p-3",staticStyle:{"z-index":"11"}},[s("div",{staticClass:"toast align-items-center text-white bg-success border-0",attrs:{id:"successToast",role:"alert","aria-live":"assertive","aria-atomic":"true"}},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"toast-body"},[t._v(" "+t._s(t.toastMessage)+" ")]),s("button",{staticClass:"btn-close btn-close-white me-2 m-auto",attrs:{type:"button","data-bs-dismiss":"toast"}})])])])],1)},r=[function(){var t=this,s=t._self._c;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"}},[s("span",{staticClass:"navbar-toggler-icon"})])}],o=(a(4114),a(8992),a(2577),a(1454),a(8872),function(){var t=this,s=t._self._c;return s("div",{staticClass:"container mt-4"},[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search lessons"},domProps:{value:t.searchQuery},on:{input:[function(s){s.target.composing||(t.searchQuery=s.target.value)},t.handleSearch]}}),t._m(0)])]),s("div",{staticClass:"col-md-3"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.sortOrder,expression:"sortOrder"}],staticClass:"form-select",on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.sortOrder=s.target.multiple?a:a[0]},t.handleSort]}},[s("option",{attrs:{value:"price:asc"}},[t._v("Price Low to High")]),s("option",{attrs:{value:"price:desc"}},[t._v("Price High to Low")]),s("option",{attrs:{value:"subject:asc"}},[t._v("Subject A to Z")]),s("option",{attrs:{value:"subject:desc"}},[t._v("Subject Z to A")]),s("option",{attrs:{value:"duration:asc"}},[t._v("Duration Short to Long")]),s("option",{attrs:{value:"duration:desc"}},[t._v(" Duration Long to Short ")]),s("option",{attrs:{value:"location:asc"}},[t._v("Location A to Z")]),s("option",{attrs:{value:"location:desc"}},[t._v("Location Z to A")]),s("option",{attrs:{value:"instructor:asc"}},[t._v("Instructor A to Z")]),s("option",{attrs:{value:"instructor:desc"}},[t._v("Instructor Z to A")]),s("option",{attrs:{value:"spaces:asc"}},[t._v("Spaces Low to High")]),s("option",{attrs:{value:"spaces:desc"}},[t._v("Spaces High to Low")])])])]),s("div",{staticClass:"row"},t._l(t.filteredLessons,(function(a){return s("div",{key:a.id,staticClass:"col-md-4 mb-4"},[s("div",{staticClass:"card h-100"},[s("img",{staticClass:"card-img-top",attrs:{src:t.getImageUrl(a.image),alt:a.subject}}),s("div",{staticClass:"card-header bg-light"},[s("i",{staticClass:"me-2",class:a.icon}),s("span",{staticClass:"badge bg-primary"},[t._v(t._s(a.duration))])]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(a.subject))]),s("p",{staticClass:"card-text"},[t._v(t._s(a.description))]),s("div",{staticClass:"mb-2"},[s("i",{staticClass:"bi bi-geo-alt me-2"}),s("span",[t._v(t._s(a.location))])]),s("div",{staticClass:"mb-2"},[s("i",{staticClass:"bi bi-person me-2"}),s("span",[t._v(t._s(a.instructor))])]),s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("div",[s("h5",{staticClass:"text-primary mb-0"},[t._v(" £"+t._s(a.price)+" ")]),s("small",{staticClass:"text-muted"},[t._v(" "+t._s(a.spaces)+" spaces left ")])]),s("button",{staticClass:"btn btn-primary",attrs:{disabled:a.spaces<=0},on:{click:function(s){return t.addToCart(a)}}},[s("i",{staticClass:"bi bi-cart-plus"}),t._v(" "+t._s(a.spaces>0?"Add to Cart":"No Spaces Left")+" ")])])])])])})),0),t.loading?s("div",{staticClass:"loading-overlay"},[t._m(1)]):t._e(),t.error?s("div",{staticClass:"error-message"},[t._v(" "+t._s(t.error)+" ")]):t._e()])}),n=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"}},[s("i",{staticClass:"bi bi-search"}),t._v(" Search ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[s("span",{staticClass:"visually-hidden"},[t._v("Loading...")])])}];a(4520),a(4603),a(7566),a(8721);const c={baseURL:"https://shopping-node-jan3.onrender.com",headers:{"Content-Type":"application/json"}},l=t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t.params&&(t.params=Object.fromEntries(Object.entries(t.params).filter((([t,s])=>void 0!==s&&null!==s&&""!==s)))),t},d=async t=>{if(!t.ok){const s=await t.json();throw new Error(s.message||"Network response was not ok")}return t.json()},u=t=>{throw console.error("Request Error:",t),t},m=async(t,s={})=>{try{const a={...c,...s,headers:{...c.headers,...s.headers}},e=l(a);let i=`${e.baseURL}${t}`;if(e.params){const t=new URLSearchParams(e.params).toString();i+=`?${t}`}const r=await fetch(i,e);return await d(r)}catch(a){return u(a)}},p={get:(t,s={})=>m(t,{...s,method:"GET"}),post:(t,s,a={})=>m(t,{...a,method:"POST",body:JSON.stringify(s)}),put:(t,s,a={})=>m(t,{...a,method:"PUT",body:JSON.stringify(s)}),delete:(t,s={})=>m(t,{...s,method:"DELETE"})},v={getLessons(t={}){return p.get("/api/lessons/search",{params:t})}},h={createOrder(t){return p.post("/api/orders",t)}};var b=a(896),f=a.n(b),C={name:"LessonList",data(){return{lessons:[],searchQuery:"",sortOrder:"price:asc",loading:!1,error:null}},computed:{filteredLessons(){return this.lessons},apiUrl(){return"https://shopping-node-jan3.onrender.com"}},created(){this.debouncedSearch=f()(this.fetchLessons,300)},methods:{async fetchLessons(){try{this.loading=!0,this.error=null;const t={search:this.searchQuery,sort:this.sortOrder},s=await v.getLessons(t);this.lessons=s}catch(t){console.error("Failed to fetch lessons:",t),this.error="Failed to load lessons. Please try again."}finally{this.loading=!1}},handleSearch(){this.debouncedSearch()},handleSort(){this.fetchLessons()},addToCart(t){t.spaces>0&&(t.spaces--,this.$emit("add-to-cart",{...t,availableSpaces:t.spaces}))},getImageUrl(t){return`${this.apiUrl}${t}`}},mounted(){this.fetchLessons()}},g=C,y=a(1656),_=(0,y.A)(g,o,n,!1,null,"568b1612",null),w=_.exports,x=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container mt-4"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header bg-primary text-white"},[s("h4",{staticClass:"mb-0"},[s("i",{staticClass:"bi bi-cart3"}),t._v(" Shopping Cart "),s("span",{staticClass:"badge bg-light text-primary ms-2"},[t._v(t._s(t.cart.length))])])]),s("div",{staticClass:"card-body"},[0===t.cart.length?s("div",{staticClass:"text-center py-5"},[s("i",{staticClass:"bi bi-cart-x display-1 text-muted"}),s("p",{staticClass:"mt-3"},[t._v("Your cart is empty. Start shopping now!")])]):s("div",[s("div",{staticClass:"list-group"},t._l(t.cart,(function(a){return s("div",{key:a.id,staticClass:"list-group-item"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col-md-2"},[s("img",{staticClass:"img-fluid rounded",attrs:{src:t.getImageUrl(a.image),alt:a.name}})]),s("div",{staticClass:"col-md-3"},[s("h5",{staticClass:"mb-1"},[t._v(t._s(a.name))]),s("p",{staticClass:"text-muted mb-0"},[t._v(" "+t._s(a.description)+" ")])]),s("div",{staticClass:"col-md-2"},[s("span",{staticClass:"text-primary fw-bold"},[t._v("£"+t._s(a.price))])]),s("div",{staticClass:"col-md-3"},[s("div",{staticClass:"input-group"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(s){return t.updateQuantity(a,a.quantity-1)}}},[t._v(" - ")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:a.quantity,expression:"item.quantity",modifiers:{number:!0}}],staticClass:"form-control text-center",attrs:{type:"number",min:"1"},domProps:{value:a.quantity},on:{change:function(s){return t.updateQuantity(a,a.quantity)},input:function(s){s.target.composing||t.$set(a,"quantity",t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}}),s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(s){return t.updateQuantity(a,a.quantity+1)}}},[t._v(" + ")])])]),s("div",{staticClass:"col-md-2 text-end"},[s("button",{staticClass:"btn btn-outline-danger",on:{click:function(s){return t.removeFromCart(a)}}},[s("i",{staticClass:"bi bi-trash"}),t._v(" Remove ")])])])])})),0),s("div",{staticClass:"mt-4"},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("h5",[t._v(" Total: "),s("span",{staticClass:"text-primary"},[t._v("¥"+t._s(t.totalAmount))])]),s("button",{staticClass:"btn btn-success btn-lg",on:{click:t.showCheckoutModal}},[s("i",{staticClass:"bi bi-credit-card"}),t._v(" Checkout ")])])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"checkoutModal",tabindex:"-1"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},[s("form",{staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(s){return s.preventDefault(),t.submitOrder.apply(null,arguments)}}},[s("div",{staticClass:"mb-3"},[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.name,expression:"orderForm.name"}],staticClass:"form-control",class:{"is-invalid":t.showValidation&&!t.isNameValid},attrs:{type:"text",required:""},domProps:{value:t.orderForm.name},on:{input:function(s){s.target.composing||t.$set(t.orderForm,"name",s.target.value)}}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Please enter a valid name (letters only) ")])]),s("div",{staticClass:"mb-3"},[t._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.phone,expression:"orderForm.phone"}],staticClass:"form-control",class:{"is-invalid":t.showValidation&&!t.isPhoneValid},attrs:{type:"tel",required:""},domProps:{value:t.orderForm.phone},on:{input:function(s){s.target.composing||t.$set(t.orderForm,"phone",s.target.value)}}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Please enter a valid phone number (numbers only) ")])]),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label"},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.orderForm.email,expression:"orderForm.email",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.showValidation&&t.orderForm.email&&!t.isValidEmail},attrs:{type:"email"},domProps:{value:t.orderForm.email},on:{input:function(s){s.target.composing||t.$set(t.orderForm,"email",s.target.value.trim())},blur:function(s){return t.$forceUpdate()}}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Please enter a valid email address ")])])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v(" Cancel ")]),s("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:!t.isFormValid},on:{click:t.submitOrder}},[s("i",{staticClass:"bi bi-credit-card"}),t._v(" Confirm Checkout ")])])])])]),t._m(3)])},F=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("Confirm Checkout")]),s("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal"}})])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"form-label"},[t._v("Name "),s("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"form-label"},[t._v("Phone "),s("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"toast-container position-fixed bottom-0 end-0 p-3"},[s("div",{staticClass:"toast align-items-center text-bg-success border-0",attrs:{id:"orderToast",role:"alert","aria-live":"assertive","aria-atomic":"true"}},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"toast-body"},[t._v("Order submitted successfully!")]),s("button",{staticClass:"btn-close btn-close-white me-2 m-auto",attrs:{type:"button","data-bs-dismiss":"toast","aria-label":"Close"}})])])])}],S=a(8077),k={name:"ShoppingCart",props:["cart"],data(){return{orderForm:{name:"",phone:"",email:"",address:""},showValidation:!1}},computed:{isNameValid(){return this.orderForm.name&&/^[A-Za-z\s]+$/.test(this.orderForm.name.trim())},isPhoneValid(){return this.orderForm.phone&&/^\d+$/.test(this.orderForm.phone.trim())},isValidEmail(){if(!this.orderForm.email)return!1;const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(this.orderForm.email.trim())},isFormValid(){return this.isNameValid&&this.isPhoneValid&&(!this.email||this.isValidEmail)},totalAmount(){return this.cart.reduce(((t,s)=>t+s.price*s.quantity),0)},apiUrl(){return"https://shopping-node-jan3.onrender.com"}},methods:{removeFromCart(t){this.$emit("remove-from-cart",t)},showCheckoutModal(){const t=new S.aF(document.getElementById("checkoutModal"));this.showValidation=!1,t.show()},async submitOrder(){if(this.showValidation=!0,this.isFormValid)try{const t={lessons:this.cart.map((t=>({id:t._id,spaces:t.quantity}))),totalAmount:this.totalAmount,...this.orderForm};await h.createOrder(t);const s=document.getElementById("orderToast"),a=new S.y8(s);a.show(),this.$emit("clear-cart");const e=S.aF.getInstance(document.getElementById("checkoutModal"));e.hide()}catch(t){console.error("Failed to submit order:",t)}},updateQuantity(t,s){this.$emit("update-quantity",t,s)},getImageUrl(t){return`${this.apiUrl}${t}`}}},L=k,O=(0,y.A)(L,x,F,!1,null,"23f41d62",null),V=O.exports,j={name:"App",components:{LessonList:w,ShoppingCart:V},data(){return{cart:[],currentView:"lessons",toastMessage:""}},computed:{cartItems(){return this.cart.map((t=>({...t.lesson,quantity:t.quantity,totalPrice:t.lesson.price*t.quantity})))},totalQuantity(){return this.cart.reduce(((t,s)=>t+s.quantity),0)}},methods:{toggleView(){this.currentView="lessons"===this.currentView?"cart":"lessons"},showToast(t){this.toastMessage=t;const s=document.getElementById("successToast"),a=new S.y8(s);a.show()},addToCart(t){const s=this.cart.find((s=>s.lesson._id===t._id));s?s.quantity+=1:this.cart.push({lesson:t,quantity:1}),this.showToast(`Added ${t.subject} to cart`)},removeFromCart(t){const s=this.cart.findIndex((s=>s.lesson._id===t._id));-1!==s&&this.cart.splice(s,1)},updateQuantity(t,s){const a=this.cart.find((s=>s.lesson._id===t._id));a&&(s<=0?this.removeFromCart(t):a.quantity=s)},clearCart(){this.cart=[]}}},P=j,$=(0,y.A)(P,i,r,!1,null,null,null),q=$.exports;a(323);e.Ay.config.productionTip=!1,new e.Ay({render:t=>t(q)}).$mount("#app")}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var r=s[e]={exports:{}};return t[e].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(s,e,i,r){if(!e){var o=1/0;for(d=0;d<t.length;d++){e=t[d][0],i=t[d][1],r=t[d][2];for(var n=!0,c=0;c<e.length;c++)(!1&r||o>=r)&&Object.keys(a.O).every((function(t){return a.O[t](e[c])}))?e.splice(c--,1):(n=!1,r<o&&(o=r));if(n){t.splice(d--,1);var l=i();void 0!==l&&(s=l)}}return s}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[e,i,r]}}(),function(){a.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(s,{a:s}),s}}(),function(){a.d=function(t,s){for(var e in s)a.o(s,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(s){return 0===t[s]};var s=function(s,e){var i,r,o=e[0],n=e[1],c=e[2],l=0;if(o.some((function(s){return 0!==t[s]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(c)var d=c(a)}for(s&&s(e);l<o.length;l++)r=o[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(d)},e=self["webpackChunkshopping_vue"]=self["webpackChunkshopping_vue"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=a.O(void 0,[504],(function(){return a(5720)}));e=a.O(e)})();
//# sourceMappingURL=app.56873ec9.js.map